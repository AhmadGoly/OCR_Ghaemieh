<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ghaemieh OCR</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <h1>سرویس استخراج متن از تصاویر و PDF</h1>
      <p>فایل خود را آپلود کنید تا متن آن استخراج شود</p>
    </header>

    <main>
      <div class="container">
        <div id="upload-area" class="upload-area">
          <div class="upload-area-content">
            <p>فایل خود را اینجا بکشید و رها کنید یا</p>
            <button id="file-browser-button" class="button">انتخاب فایل</button>
            <input
              type="file"
              id="file-input"
              hidden
              accept=".pdf,.png,.jpg,.jpeg,.tiff"
            />
          </div>
        </div>

        <div class="options-container">
          <button id="toggle-hints" class="button" style="margin-bottom: 1rem">
            نمایش راهنما
          </button>
          <h2>تنظیمات</h2>
          <div class="options-grid">
            <div class="option">
              <label for="model-select">مدل OCR:</label>
              <select id="model-select" class="select">
                <option value="tesseract">Tesseract</option>
                <option value="docling">Docling</option>
                <option value="qwen">Qwen (GPU)</option>
                <option value="varco">Varco (GPU)</option>
              </select>
              <span class="hint"
                >انتخاب مدل پردازش متن برای استخراج دقیق‌تر. مدل‌ها شامل CPU و
                GPU هستند. این گزینه سرعت و دقت OCR را تعیین می‌کند.</span
              >
            </div>

            <div class="option">
              <label for="lang-select">زبان:</label>
              <select id="lang-select" class="select">
                <option value="fas">فارسی</option>
                <option value="eng">انگلیسی</option>
                <option value="ara">عربی</option>
                <option value="ara+fas">عربی + فارسی</option>
                <option value="eng+fas">انگلیسی + فارسی</option>
                <option value="eng+ara">انگلیسی + عربی</option>
                <option value="eng+ara+fas">انگلیسی + عربی + فارسی</option>
              </select>
              <span class="hint"
                >انتخاب زبان‌های موجود در فایل برای OCR. این گزینه به مدل کمک
                می‌کند تا کاراکترها و حروف را درست تشخیص دهد. مناسب برای اسناد
                چندزبانه است.</span
              >
            </div>

            <div class="option toggle-option">
              <label for="preprocess-toggle">پیش‌پردازش:</label>
              <label class="switch">
                <input type="checkbox" id="preprocess-toggle" checked />
                <span class="slider round"></span>
              </label>
              <span class="hint"
                >قبل از OCR تصویر تمیز می‌شود و نویز کاهش می‌یابد. این باعث
                می‌شود متن واضح‌تر شود و شناسایی آسان‌تر شود. کیفیت نهایی OCR
                بالاتر می‌رود.</span
              >
            </div>

            <div class="option toggle-option">
              <label for="contrast-toggle">افزایش کنتراست:</label>
              <label class="switch">
                <input type="checkbox" id="contrast-toggle" />
                <span class="slider round"></span>
              </label>
              <span class="hint"
                >روشنایی و تاریکی تصویر تنظیم می‌شود تا متن واضح‌تر شود. بخش‌های
                محو خواناتر می‌شوند و دقت OCR افزایش می‌یابد. متن به صورت واضح و
                قابل خواندن استخراج می‌شود.</span
              >
            </div>

            <div class="option toggle-option">
              <label for="crop-toggle">برش حاشیه‌های سفید:</label>
              <label class="switch">
                <input type="checkbox" id="crop-toggle" />
                <span class="slider round"></span>
              </label>
              <span class="hint">حاشیه‌های سفید اضافی از اطراف تصویر حذف می‌شوند تا ناحیه متن اصلی برای پردازش بهتر متمرکز شود.</span>
            </div>

            <div class="option toggle-option">
              <label for="llm-toggle">بهبود با LLM:</label>
              <label class="switch">
                <input type="checkbox" id="llm-toggle" />
                <span class="slider round"></span>
              </label>
              <span class="hint"
                >متن استخراج شده توسط OCR بررسی و اصلاح می‌شود. اشتباهات رایج
                تصحیح می‌شوند و متن طبیعی‌تر می‌شود. خروجی تمیز و روان ارائه
                می‌شود.</span
              >
            </div>

            <div class="option range-option">
              <label for="scale-slider">مقیاس تصویر:</label>
              <input
                type="range"
                id="scale-slider"
                min="0.1"
                max="5.0"
                step="0.1"
                value="1.0"
              />
              <span id="scale-value">1.0</span>
              <span class="hint"
                >اندازه تصویر تغییر می‌کند تا متن ریز راحت‌تر شناسایی شود. مقیاس
                مناسب دقت و سرعت OCR را بهینه می‌کند. این گزینه برای کیفیت و
                عملکرد بهتر مفید است.</span
              >
            </div>

            <div class="option page-range-option">
              <label>محدوده صفحات (برای PDF):</label>
              <div class="page-inputs">
                <input
                  type="number"
                  id="start-page"
                  placeholder="شروع"
                  min="1"
                />
                <input
                  type="number"
                  id="end-page"
                  placeholder="پایان"
                  min="1"
                />
              </div>
              <span class="hint"
                >انتخاب صفحات مورد نظر برای پردازش. این گزینه اجازه می‌دهد فقط
                بخشی از PDF پردازش شود. مناسب برای فایل‌های چندصفحه‌ای
                است.</span
              >
            </div>
          </div>

          <button id="submit-button" class="button primary-button" disabled>
            ارسال
          </button>
        </div>

        <div id="results-area" class="results-area" hidden>
          <h2>نتایج استخراج</h2>
          <div class="results-actions">
            <button id="copy-button" class="button">کپی متن</button>
            <button id="download-button" class="button">دانلود متن</button>
          </div>

          <div id="image-results-container" class="image-results-container" hidden>
            <div class="image-container">
              <h3>تصویر اصلی</h3>
              <img id="original-image" src="" alt="Original Image" />
            </div>
            <div class="image-container">
              <h3>تصویر پردازش شده</h3>
              <img id="processed-image" src="" alt="Processed Image" />
            </div>
          </div>
          <pre id="ocr-output"></pre>
        </div>

        <div id="loading-indicator" class="loading-indicator" hidden>
          <div class="book">
            <div class="book__pg-shadow"></div>
            <div class="book__pg book__pg--1"></div>
            <div class="book__pg book__pg--2"></div>
            <div class="book__pg book__pg--3"></div>
            <div class="book__pg book__pg--4"></div>
            <div class="book__pg book__pg--5"></div>
          </div>
          <p>در حال پردازش... لطفاً منتظر بمانید.</p>
        </div>
      </div>
    </main>

    <footer>
      <p>ساخته شده با ❤️ - کتابخانه دیجیتال (بازار کتاب) قائمیه</p>
    </footer>

    <script src="script.js"></script>
  </body>
</html>
